<?xml version="1.0" encoding="UTF-8"?>
<!--
  - \file   Graphics.xml
  - \author Boubacar DIENE <boubacar.diene@gmail.com>
  - \date   September 04, 2016

  - \brief  Here are defined all elements to draw on screen
-->

<Graphics>

  <!--
    Common resources

    - defaulLanguage : Default UI language

    - Colors  : All used colors are listed inside
    - Images  : All used images are listed inside
    - Fonts   : All used fonts are listed inside
    - Strings : All used strings are listed inside by language
  -->
  <Common defaultLanguage="en">
    <Colors  xmlFile="common/Colors.xml"  />
    <Images  xmlFile="common/Images.xml"  />
    <Fonts   xmlFile="common/Fonts.xml"   />
    <Strings xmlFile="common/Strings.xml" />
  </Common>

  <!--
    Screen configuration

      - width / height : Screen size

      - bitsPerPixel   : Bits per pixel

      - fullScreen     : 1 <=> Application is launched in fullscreen mode
                         0 <=> width and height are used

      - showCursor     : Show mouse cursor or not
                         0 <=> Hide
                         1 <=> Show

      - caption        : Window title
                         If empty, winddow's title bar will be hidden.

      - videoFormat    : Video format. Used drawer function depends on this.
                         (See "configChoice" in Video.xml to determine which value to use)
                         0 <=> MJPEG (MMAP / USERPTR)
                         1 <=> YVYU (MMAP / USERPTR)
  -->
  <Screen width="840"
          height="680"
          bitsPerPixel="32"
          fullscreen="0"
          showCursor="0"
          caption=""
          videoFormat="0">
    <!--
      Background

      useColor      : Choose between using color (colorId) and image (imageId and hiddenColorId)
                      1 <=> Color
                      0 <=> Image

      colorId       : Background color (See Colors.xml)
      imageId       : Background image (See Images.xml)
      hiddenColorId : Color to hide in background image (See Colors.xml)
                      -1 if not used
    -->
    <Background useColor="1" colorId="5" imageId="" hiddenColorId="-1" />

    <!--
      Icon

      imageId       : Image to use as icon (See Images.xml)
      hiddenColorId : Color to hide in image (See Colors.xml)
                      -1 if not used
    -->
    <Icon imageId="0" hiddenColorId="1" />

    <!--
      List of graphics elements

      group     : Group name to which belongs the element.
                  When, for example, elementA is smaller than elementB and both share the same
                  surface, drawing B after A will make A hidden.
                  To avoid that, A and B may be put in the same group so when updating B, user
                  just has to choose to update other elements belonging to that group by the same
                  time => A is redrawn each time B is updated.

      redrawGroup : Tell whether or not elements sharing the same group as the one being drawn have
                    to be redrawn when data of this latter have changed

      type      : Type of element
                  0 <=> Video
                  1 <=> Image
                  2 <=> Text

      x, y, width, height : Coordinates of the rectangle where element is drawn

      visible   : 0 <=> Element is hidden
                  1 <=> Element is displayed

      clickable : 0 <=> Element is not clickable i.e click on it will have no effect
                  1 <=> Element is clickable, "click event" is sent to listeners

      focusable : 0 <=> Element is not focusable i.e it does not support navigation
                  1 <=> Element is focusable

      hasFocus  : 0 <=> Element has focus
                  1 <=> Element does not have focus

                  Note: Only one element must have default focus. It's your responsibility to
                        guarantee that.

      stringId, fontId, colorId and imageId : Respectively defined in Strings.xml, Fonts.xml,
                                              Colors.xml and Images.xml

      Nav : left  <=> Element at left of current element which gains focus when user moves to left
            up    <=> Element at top of current element which gains focus when user moves up
            right <=> Element at right of current element which gains focus when user moves to right
            down  <=> Element at bottom of current element which gains focus when user moves down

      OnClick : Handlers are called sequentially according to their order of definition

                Here is the list of predefined click handlers :

                01- closeApplication : "data" is not used

                02- changeLanguage   : "data" empty => next language in Strings.xml is chosen
                                       "data" can also be used to set a specific language ("en, "fr", ...)

                03- hideElement      : "data" contains the name of graphics element to hide

                04- showElement      : "data" contains the name of graphics element to display

                05- hideGroup        : "data" contains the group's name to hide (=> all elements which
                                       belong to that group are hidden)

                06- showGroup        : "data" contains the group's name to display (=> all elements which
                                       belong to that group are displayed)

                07- setFocus         : "data" contains the name of graphics element that gains focus

                08- saveVideoElement : "data" contains the name of video element whose content is saved in a
                                       .bmp image file

                09- takeScreenshot   : "data" contains the file format (Only BMP is currently handled !!) :
                                       0 => BMP
                                       1 => PNG
                                       2 => JPEG

                10- setClickable     : "data" contains the name of graphics element that becomes clickable

                11- setNotClickable  : "data" contains the name of graphics element that becomes not clickable

                12- stopGraphics     : "data" is not used

                13- startGraphics    : "data" is not used

                14- stopVideo        : "data" contains the name of video device to stop
                                       Note: It is recommended to suspend server(s) first !

                15- startVideo       : "data" contains the name of video device to start
                                       Note: Do not forget to resume server(s) if suspended before

                16- stopServer       : "data" contains the name of server to stop

                17- startServer      : "data" contains the name of server to start

                18- suspendServer    : "data" contains the name of server to suspend

                19- resumeServer     : "data" contains the name of server to resume

                20- stopCient        : "data" contains the name of client to stop

                21- startClient      : "data" contains the name of client to start

                22- multiInputs      : "data" must have the following format :
                                       functionName;targetName;param1;param2;param3;...

                                       where functionName is the name of function to call and
                                       param1;param2;param3;... the list of expected parameters.
    -->
    <Elements>
      <Element name="videoZone" group="videoView" redrawGroup="1" type="0" x="160" y="160" width="640" height="480">
        <Config visible="1" clickable="0" focusable="0" hasFocus="0" />
      </Element>

      <Element name="imageBtn" group="videoView" redrawGroup="1" type="1" x="200" y="200" width="100" height="100">
        <Config visible="0" clickable="0" focusable="0" hasFocus="0" />
        <Image imageId="0" hiddenColorId="1" />
      </Element>

      <Element name="textBtn1" group="menu" redrawGroup="0" type="2" x="20" y="20" width="100" height="100">
        <Config visible="1" clickable="1" focusable="1" hasFocus="1" />
        <Text stringId="0" fontId="2" colorId="6" size="15" />
        <Nav left="" up="textBtn3" right="" down="imageBtn1" />
        <OnClick>
            <Handler name="closeApplication" data="" />
        </OnClick>
      </Element>

      <Element name="imageBtn1" group="menu" redrawGroup="0" type="1" x="20" y="200" width="100" height="100">
        <Config visible="1" clickable="1" focusable="1" hasFocus="0" />
        <Image imageId="0" hiddenColorId="1" />
        <Nav left="" up="textBtn1" right="" down="textBtn2" />
        <OnClick>
            <Handler name="saveVideoElement" data="videoZone" />
            <Handler name="takeScreenshot" data="0" />
        </OnClick>
      </Element>

      <Element name="textBtn2" group="menu" redrawGroup="0" type="2" x="20" y="380" width="100" height="100">
        <Config visible="1" clickable="1" focusable="1" hasFocus="0" />
        <Text stringId="1" fontId="1" colorId="0" size="15" />
        <Nav left="" up="imageBtn1" right="" down="textBtn3" />
        <OnClick>
            <Handler name="changeLanguage" data="" />
            <!--Handler name="multiInputs" data="updateNav;textBtn2;;textBtn3;;imageBtn1" /--><!-- fctName;elemName;left;up;right;down -->
        </OnClick>
      </Element>

      <Element name="textBtn3" group="menu" redrawGroup="0" type="2" x="20" y="560" width="100" height="100">
        <Config visible="1" clickable="1" focusable="1" hasFocus="0" />
        <Text stringId="2" fontId="2" colorId="1" size="20" />
        <Nav left="" up="textBtn2" right="" down="textBtn1" />
        <OnClick>
            <Handler name="showElement" data="imageBtn" />
            <Handler name="multiInputs" data="updateText;textBtn1;0;1;20;1" /><!-- fctName;elemName;stringId;fontId;fontSize;colorId -->
            <Handler name="multiInputs" data="updateImage;imageBtn1;0;-1" /><!-- fctName;elemName;imageId;hidenColorId -->
        </OnClick>
      </Element>

      <Element name="textTitle1" group="title" redrawGroup="0" type="2" x="260" y="50" width="200" height="50">
        <Config visible="1" clickable="0" focusable="0" hasFocus="0" />
        <Text stringId="4" fontId="2" colorId="2" size="20" />
        <OnClick>
            <Handler name="suspendServer" data="inet-videoServer" />
            <Handler name="stopVideo" data="camera0" />
        </OnClick>
      </Element>
    </Elements>

  </Screen>

  <!--
      Colors to apply when element's state changed

      Focus : Element gains focus
      Blur  : Element looses focus
      Reset : Element becomes invisible
  -->
  <Focus colorId="3" />
  <Blur  colorId="4" />
  <Reset colorId="5" />

</Graphics>

